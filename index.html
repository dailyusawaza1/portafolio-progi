<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portafolio - Programación I</title>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f7fb; --card:#ffffff; --muted:#7a869a; --accent:#2b6ef6; --accent-2:#58c0a3;
      --radius:12px; --shadow: 0 6px 18px rgba(33,40,60,0.06);
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#ffffff);color:#122033}
    header{padding:28px 24px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#5b8ef7);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;box-shadow:0 6px 18px rgba(43,110,246,0.18)}
    h1{margin:0;font-size:18px}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    main{max-width:1100px;margin:18px auto;padding:24px}
    .grid{display:grid;grid-template-columns:1fr 340px;gap:20px}

    /* Left column */
    .timeline{display:flex;flex-direction:column;gap:14px}
    .day{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:14px 16px}
    .day .date{color:var(--muted);font-size:14px;margin-bottom:8px}

    .activity{display:flex;align-items:center;gap:14px;padding:12px;border-radius:10px;border:1px solid #f0f2f6}
    .act-icon{width:58px;height:58px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfdff);display:flex;align-items:center;justify-content:center;font-size:26px;color:var(--accent);box-shadow:inset 0 -6px 18px rgba(0,0,0,0.02)}
    .act-meta{flex:1}
    .act-title{font-weight:600;margin:0;margin-bottom:4px}
    .act-sub{color:var(--muted);font-size:13px;margin:0}
    .act-score{min-width:110px;text-align:right}
    .score-bubble{display:inline-block;background:#eaf0ff;color:var(--accent);padding:8px 10px;border-radius:8px;font-weight:600;font-size:14px;border:1px solid rgba(43,110,246,0.08)}

    /* right column */
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
    .progress{margin-top:8px;background:#f2f5fb;border-radius:999px;height:14px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%;transition:width 900ms cubic-bezier(.2,.9,.3,1)}

    .stats{display:flex;gap:12px;margin-top:12px}
    .stat{flex:1;padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfdff);border:1px solid #f0f2f6}
    .stat h3{margin:0;font-size:24px}
    .stat p{margin:6px 0 0;color:var(--muted);font-size:13px}

    footer{max-width:1100px;margin:20px auto;padding:0 24px 40px;color:var(--muted);font-size:13px}

    @media (max-width:980px){.grid{grid-template-columns:1fr}.act-score{display:none}.logo{width:44px;height:44px}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">PG</div>
      <div>
        <h1>Portafolio — Programación I (PROGI)</h1>
        <p class="lead">Universidad Tecnológica de Panamá — Entrega: 28 Nov 2025</p>
      </div>
    </div>
    <div style="text-align:right">
      <div style="font-weight:600;color:var(--muted)">Alumno: Justing He — Cédula: 8-1045-2230</div>
      <div style="font-size:12px;color:var(--muted);margin-top:6px">Profesor: Napoleón Ibarra · Valor: 100 pts</div>
    </div>
  </header>

  <main>
    <div class="grid">
      <section>
        <div class="timeline" id="timeline">
          <!-- actividades inyectadas por JS -->
        </div>
      </section>

      <aside>
        <div class="card">
          <h3 style="margin:0 0 6px">Resumen del curso</h3>
          <p style="margin:0;color:var(--muted)">Visión rápida de puntajes y progreso de entrega.</p>

          <div style="margin-top:14px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:600">Progreso del portafolio</div>
              <div id="avgScore" style="font-weight:700;color:var(--accent)">-- / 100</div>
            </div>
            <div class="progress" aria-hidden="true">
              <i id="progressBar"></i>
            </div>
          </div>

          <div class="stats">
            <div class="stat">
              <h3 id="completed">0</h3>
              <p>Actividades</p>
            </div>
            <div class="stat">
              <h3 id="highest">—</h3>
              <p>Mejor nota</p>
            </div>
            <div class="stat">
              <h3 id="lowest">—</h3>
              <p>Peor nota</p>
            </div>
          </div>

        </div>
        <div style="height:14px"></div>
        <div class="card">
          <h4 style="margin:0 0 8px">Sugerencias para la sustentación</h4>
          <ol style="margin:0 0 0 18px;color:var(--muted)">
            <li>Explique 3 actividades principales (objetivo y su aporte).</li>
            <li>Muéstre código clave o capturas de funciones.</li>
            <li>Mencione dificultades y cómo las resolvió.</li>
          </ol>
        </div>
      </aside>

<!-- Botón para subir archivos -->
<div style="margin-top:20px; background:white; padding:18px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.06);">
  <h3 style="margin:0 0 10px">Subir archivos al portafolio</h3>
  <p style="margin:0 0 14px; color:#7a869a; font-size:14px">Puedes seleccionar un archivo y se mostrará debajo como archivo subido.</p>

  <input type="file" id="fileUpload" style="padding:10px; border-radius:8px; border:1px solid #ddd; width:100%" />

  <div id="uploadedFiles" style="margin-top:14px; display:flex; flex-direction:column; gap:10px;"></div>
</div>
    </div>
  </main>

  <footer>
    <div>Formato recomendado: Subir a GitHub Pages y compartir el enlace con el profesor.</div>
  </footer>

  <script>
// ================================
// CARGAR ARCHIVOS EXISTENTES DEL REPO
// ================================
async function loadUploadedFiles() {
    const repoOwner = "dailyusawaza1";   // <-- tu usuario
    const repoName = "portafolio-progi"; // <-- tu repo
    const folderPath = "archivos";

    const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${folderPath}`;

    try {
        const response = await fetch(apiUrl);
        if (!response.ok) return;  // si no existe la carpeta, no hace nada

        const files = await response.json();

        const list = document.getElementById("uploadedFiles");
        list.innerHTML = ""; // limpia antes de mostrar

        files.forEach(f => {
            const item = document.createElement("div");
            item.style = "padding:10px; background:#f8f9fc; border-radius:8px; border:1px solid #e5e8ee;";
            item.innerHTML = `
                <strong>${f.name}</strong>
                <br>
                <a href="${f.download_url}" target="_blank">Ver / Descargar</a>
            `;
            list.appendChild(item);
        });

    } catch (e) {
        console.log("Error cargando archivos:", e);
    }
}

// Ejecutar al cargar la página
loadUploadedFiles();

const activities = [
      {date:'2025-08-20', label:'Investigación1', course:'PROGI', score:98, desc:'Investigación sobre fundamentos de programación.'},
      {date:'2025-09-01', label:'Laboratorio Práctico1', course:'PROGI', score:100, desc:'Laboratorio con ejercicios de estructuras básicas.'},
      {date:'2025-09-08', label:'Laboratorio Práctico2', course:'PROGI', score:20, desc:'Laboratorio 2 — ejercicios entregados con retraso.'},
      {date:'2025-09-11', label:'Ejercicio Práctico1', course:'PROGI', score:86, desc:'Ejercicios de control de flujo y funciones.'},
      {date:'2025-09-22', label:'Investigación2', course:'PROGI', score:20, desc:'Segunda investigación.'},
      {date:'2025-10-01', label:'Examen Parcial1', course:'PROGI', score:71, desc:'Examen parcial teórico-práctico.'},
      {date:'2025-10-02', label:'Taller Práctico1', course:'PROGI', score:53, desc:'Taller de programación en consola.'},
      {date:'2025-10-22', label:'Taller Práctico3', course:'PROGI', score:20, desc:'Taller con alcance reducido.'},
      {date:'2025-11-12', label:'Examen Parcial2', course:'PROGI', score:71, desc:'Segundo examen parcial.'}
    ];

    function formatDate(dstr){
      const d = new Date(dstr);
      const options={day:'numeric',month:'short',weekday:'short'};
      return d.toLocaleDateString('es-PA', options);
    }

    function render(){
      const container = document.getElementById('timeline');
      container.innerHTML='';
      activities.sort((a,b)=> new Date(b.date)-new Date(a.date));

      activities.forEach(act=>{
        const day = document.createElement('div'); day.className='day';
        const date = document.createElement('div'); date.className='date'; date.textContent = formatDate(act.date);

        const actEl = document.createElement('div'); actEl.className='activity';
        let imgsHTML = '';
        if (act.imgs) {
          imgsHTML = `<div style=\"margin-top:10px;display:flex;gap:10px;flex-wrap:wrap\">` +
            act.imgs.map(src=>`<img src=\"${src}\" style=\"width:120px;border-radius:8px;border:1px solid #ddd\"/>`).join('') +
            `</div>`;
        }

        actEl.innerHTML = `
          <div class="act-icon">☕</div>
          <div class="act-meta">
            <div class="act-title">${act.label}</div>
            <div class="act-sub">${act.course} · ${act.desc}</div>
          </div>
          <div class="act-score"><div class="score-bubble">${act.score}/100</div></div>
        `;

        day.appendChild(date);
        day.appendChild(actEl);
        container.appendChild(day);
      });

      // Stats
      const scores = activities.map(a=>a.score);
      const avg = Math.round(scores.reduce((s,x)=>s+x,0)/scores.length);
      const completed = activities.length;
      const highest = Math.max(...scores);
      const lowest = Math.min(...scores);

      document.getElementById('avgScore').textContent = avg + ' / 100';
      document.getElementById('progressBar').style.width = '100%';
      document.getElementById('completed').textContent = completed;
      document.getElementById('highest').textContent = highest + '/100';
      document.getElementById('lowest').textContent = lowest + '/100';
    }

    // Sistema simple para mostrar archivos subidos
const fileInput = document.getElementById('fileUpload');
const uploaded = document.getElementById('uploadedFiles');

fileInput.addEventListener('change', () => {
  const file = fileInput.files[0];
  if (!file) return;

  const item = document.createElement('div');
  item.style = "padding:10px; background:#f8f9fc; border-radius:8px; border:1px solid #e5e8ee;";
  item.textContent = `Archivo subido: ${file.name}`;

  uploaded.appendChild(item);
});

render();
  </script>

<script>
async function uploadToGitHub(file) {
    const repoOwner = "dailyusawaza1";   // <-- pon tu nombre de usuario
    const repoName = "portafolio-progi";  // <-- tu repo
    const githubToken = "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";  // <-- pega tu token aquí

    const filePath = "archivos/" + file.name;
    const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}`;

    const reader = new FileReader();
    reader.onload = async () => {
        const base64File = btoa(
            new Uint8Array(reader.result)
            .reduce((data, byte) => data + String.fromCharCode(byte), "")
        );

        const body = {
            message: "Archivo subido desde portafolio web",
            content: base64File
        };

        const response = await fetch(apiUrl, {
            method: "PUT",
            headers: {
                "Authorization": `Bearer ${githubToken}`,
                "Content-Type": "application/json",
            },
            body: JSON.stringify(body)
        });

        if (response.ok) {
            const data = await response.json();
            alert("Archivo subido correctamente");
            console.log("GitHub URL:", data.content.download_url);
        } else {
            alert("Error al subir archivo");
            console.log(await response.text());
        }
    };

    reader.readAsArrayBuffer(file);
}

document.getElementById("fileUpload").addEventListener("change", () => {
    const file = fileUpload.files[0];
    if (file) uploadToGitHub(file);
});
</script>
</body>
</html>